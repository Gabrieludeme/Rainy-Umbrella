<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rainy Day Rescue</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #D1E5F0;  
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        #gameContainer {
            background-color: #F0F8FF;  
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
        }
        canvas {
            display: block;
            cursor: none;
        }
        #uiLayer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }
        #score {
            font-size: 2rem;
            font-weight: 600;
            color: #2C5282; 
            text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
        }
        #messageOverlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(44, 82, 130, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            flex-direction: column;
            pointer-events: all;
            backdrop-filter: blur(5px);
        }
        #messageOverlay h1 {
            font-size: 3.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        }
        #messageOverlay p {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }
        #startButton {
            font-size: 1.2rem;
            font-weight: 600;
            background-color: #F6AD55;  
            color: #2D3748;  
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.2s ease-in-out;
        }
        #startButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
            background-color: #ED8936;  
        }
    </style>
</head>
<body>

<div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div id="uiLayer">
        <div id="score"></div>
    </div>
    <div id="messageOverlay">
        <h1>Rainy Day Rescue</h1>
        <p>Use your mouse to shield the character from the rain!</p>
        <button id="startButton">Start Game</button>
    </div>
</div>

<script>
    
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const gameContainer = document.getElementById('gameContainer');

    
    let canvasWidth = 800;
    let canvasHeight = 600;
    
   
    let gameState = 'start'; 
    let score = 0;
    let mouseX = canvasWidth / 2;

     
    const umbrella = {
        y: 100,
        width: 120,
        height: 50,
        color: '#E53E3E',  
        handleColor: '#4A5568',  
        handleLength: 60
    };

    const character = {
        x: -50,
        y: canvasHeight - 80,
        width: 40,
        height: 60,
        speed: 0.7,
        color: '#4299E1',  
        hatColor: '#F6AD55',  
        isSafe: false
    };

    const raindrops = [];
    const rainSpawnRate = 5;  

     
    const scoreDisplay = document.getElementById('score');
    const messageOverlay = document.getElementById('messageOverlay');
    const startButton = document.getElementById('startButton');
    const messageTitle = messageOverlay.querySelector('h1');
    const messageText = messageOverlay.querySelector('p');

    
    function random(min, max) {
        return Math.random() * (max - min) + min;
    }

 
    function spawnRaindrop() {
        raindrops.push({
            x: random(0, canvasWidth),
            y: -20,
            length: random(10, 20),
            speed: random(4, 8),
            color: '#A0AEC0'  
        });
    }

    function update() {
        if (gameState !== 'playing') return;

        
        if (!character.isSafe) {
            character.x += character.speed;
        }

        
        if (character.x > canvasWidth) {
            gameState = 'win';
            showEndScreen(true);
            return;
        }

        
        if (Math.random() * 100 < rainSpawnRate) {
            spawnRaindrop();
        }

       
        for (let i = raindrops.length - 1; i >= 0; i--) {
            const drop = raindrops[i];
            drop.y += drop.speed;

          
            const umbrellaLeft = mouseX - umbrella.width / 2;
            const umbrellaRight = mouseX + umbrella.width / 2;
            if (drop.y > umbrella.y - 10 && drop.y < umbrella.y + 10 && drop.x > umbrellaLeft && drop.x < umbrellaRight) {
                raindrops.splice(i, 1);
                score++;
                scoreDisplay.textContent = `Score: ${score}`;
            } 
      
            else if (
                !character.isSafe &&
                drop.x > character.x &&
                drop.x < character.x + character.width &&
                drop.y > character.y &&
                drop.y < character.y + character.height
            ) {
                gameState = 'gameOver';
                showEndScreen(false);
            }
            
            else if (drop.y > canvasHeight) {
                raindrops.splice(i, 1);
            }
        }
    }

 
    function draw() {
         
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
        
        
        ctx.fillStyle = '#718096';  
        ctx.fillRect(0, canvasHeight - 20, canvasWidth, 20);
 
        if (!character.isSafe) {
            
            ctx.fillStyle = character.color;
            ctx.fillRect(character.x, character.y, character.width, character.height);
            
            ctx.beginPath();
            ctx.arc(character.x + character.width / 2, character.y, character.width / 2, 0, Math.PI * 2);
            ctx.fillStyle = '#F6E05E';  
            ctx.fill();
        }

         
        ctx.strokeStyle = '#A0AEC0';
        ctx.lineWidth = 2;
        for (const drop of raindrops) {
            ctx.beginPath();
            ctx.moveTo(drop.x, drop.y);
            ctx.lineTo(drop.x, drop.y + drop.length);
            ctx.stroke();
        }

       
        ctx.fillStyle = umbrella.color;
        ctx.strokeStyle = umbrella.handleColor;
        ctx.lineWidth = 8;
        
        
        ctx.beginPath();
        ctx.moveTo(mouseX, umbrella.y);
        ctx.lineTo(mouseX, umbrella.y + umbrella.handleLength);
        ctx.stroke();

      
        ctx.beginPath();
        ctx.arc(mouseX, umbrella.y, umbrella.width / 2, Math.PI, 0);
        ctx.closePath();
        ctx.fill();
    }

    
    function gameLoop() {
        update();
        draw();
        requestAnimationFrame(gameLoop);
    }

 
    function showEndScreen(didWin) {
        messageOverlay.style.display = 'flex';
        if (didWin) {
            messageTitle.textContent = 'You Win!';
            messageText.textContent = `You protected them! Final Score: ${score}`;
        } else {
            messageTitle.textContent = 'Game Over';
            messageText.textContent = `Oh no, they got wet! Your score: ${score}`;
        }
        startButton.textContent = 'Play Again';
    }

    function resetGame() {
        character.x = -50;
        character.isSafe = false;
        raindrops.length = 0;
        score = 0;
        scoreDisplay.textContent = `Score: ${score}`;
    }

    function startGame() {
        resetGame();
        gameState = 'playing';
        messageOverlay.style.display = 'none';
    }

    function resizeCanvas() {
        const containerWidth = Math.min(window.innerWidth * 0.9, 800);
        const containerHeight = containerWidth * 0.75;  

        gameContainer.style.width = `${containerWidth}px`;
        gameContainer.style.height = `${containerHeight}px`;

        canvas.width = containerWidth;
        canvas.height = containerHeight;
        
        canvasWidth = canvas.width;
        canvasHeight = canvas.height;

        
        character.y = canvasHeight - 80;
        umbrella.y = canvasHeight * 0.2;

        draw(); 
    }

    
    window.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        mouseX = e.clientX - rect.left;
    });

    startButton.addEventListener('click', startGame);
    window.addEventListener('resize', resizeCanvas);


    
    resizeCanvas();
    gameLoop();

</script>

</body>
</html>
